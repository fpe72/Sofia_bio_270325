// CONTENIDO DE LOS M√ìDULOS Y PREGUNTAS
const contenido = {
  estimulos: {
    title: "üåç Est√≠mulos y Receptores",
    content: "Tipos seg√∫n origen:\n- Externos: Sentidos (vista, o√≠do, tacto, olfato, gusto).\n- Internos: √ìrganos internos y propioceptores.\n\nTipos por naturaleza:\n- Termorreceptores (temperatura).\n- Nociceptores (dolor).\n- Mecanorreceptores (presi√≥n, vibraci√≥n).\n- Quimiorreceptores (sustancias qu√≠micas).",
    questions: [
      { question: "¬øQu√© receptores detectan la posici√≥n y movimiento del cuerpo?", options: ["Propioceptores", "Nociceptores", "Termorreceptores"], answer: 0, explanation: "Los propioceptores informan sobre la posici√≥n y movimientos corporales." },
      { question: "Los receptores que detectan sustancias qu√≠micas se llaman:", options: ["Quimiorreceptores", "Mecanorreceptores", "Termorreceptores"], answer: 0, explanation: "Correcto, los quimiorreceptores detectan sustancias qu√≠micas." },
      { question: "¬øQu√© tipo de receptores detectan cambios de temperatura?", options: ["Termorreceptores", "Nociceptores", "Mecanorreceptores"], answer: 0, explanation: "Correcto, los termorreceptores perciben los cambios t√©rmicos." },
      { question: "¬øQu√© detectan los mecanorreceptores?", options: ["Luz", "Presi√≥n y vibraciones", "Sustancias qu√≠micas"], answer: 1, explanation: "Correcto, los mecanorreceptores responden a est√≠mulos mec√°nicos como presi√≥n y vibraciones." },
      { question: "¬øQu√© funci√≥n tienen los nociceptores?", options: ["Perciben el sonido", "Detectan el dolor", "Detectan el movimiento"], answer: 1, explanation: "Exacto, los nociceptores est√°n especializados en percibir el dolor." }
    ]
  },

  vista: {
    title: "üëÅÔ∏è La Vista",
    content: "Partes principales del ojo:\n- C√≥rnea: capa externa transparente.\n- Retina: contiene fotorreceptores (conos para color, bastones para visi√≥n nocturna).\n- Cristalino: enfoca la luz sobre la retina.\n- Nervio √≥ptico: lleva la informaci√≥n visual al cerebro.\n\nDefectos visuales:\n- Miop√≠a: dificultad para ver lejos.\n- Hipermetrop√≠a: dificultad para ver cerca.\n- Astigmatismo: visi√≥n distorsionada por curvatura irregular.",
    questions: [
      { question: "¬øQu√© c√©lulas permiten la visi√≥n en color?", options: ["Conos", "Bastones", "Cristalino"], answer: 0, explanation: "Correcto, los conos permiten la percepci√≥n del color." },
      { question: "¬øQu√© estructura ocular enfoca la luz en la retina?", options: ["Cristalino", "C√≥rnea", "Iris"], answer: 0, explanation: "El cristalino ajusta el enfoque de la luz sobre la retina." },
      { question: "¬øQu√© parte del ojo es responsable de detectar la luz?", options: ["Retina", "Cristalino", "C√≥rnea"], answer: 0, explanation: "La retina contiene los fotorreceptores que captan la luz." },
      { question: "¬øQu√© defecto visual se produce por un globo ocular alargado?", options: ["Miop√≠a", "Hipermetrop√≠a", "Astigmatismo"], answer: 0, explanation: "La miop√≠a se debe a que el ojo es m√°s largo de lo normal." },
      { question: "¬øCu√°l es el nombre del nervio que transmite la informaci√≥n visual al cerebro?", options: ["Nervio √≥ptico", "Nervio auditivo", "Nervio olfativo"], answer: 0, explanation: "El nervio √≥ptico conecta el ojo con el cerebro." }
    ]
  },

  oido: {
    title: "üëÇ El O√≠do",
    content: "El o√≠do se divide en tres partes:\n- O√≠do externo: recoge el sonido.\n- O√≠do medio: contiene los huesecillos (martillo, yunque y estribo).\n- O√≠do interno: convierte el sonido en se√±ales nerviosas (c√≥clea).",
    questions: [
      { question: "¬øQu√© parte del o√≠do recoge las ondas sonoras?", options: ["O√≠do externo", "O√≠do medio", "O√≠do interno"], answer: 0, explanation: "El o√≠do externo capta las ondas sonoras del ambiente." },
      { question: "¬øQu√© funci√≥n tiene la c√≥clea?", options: ["Equilibrio", "Transmitir se√±ales visuales", "Transformar sonidos en se√±ales nerviosas"], answer: 2, explanation: "La c√≥clea convierte las vibraciones en se√±ales el√©ctricas." },
      { question: "¬øQu√© hueso del o√≠do es el m√°s peque√±o del cuerpo humano?", options: ["Martillo", "Yunque", "Estribo"], answer: 2, explanation: "El estribo es el hueso m√°s peque√±o del cuerpo humano." },
      { question: "¬øD√≥nde se encuentran los huesecillos del o√≠do?", options: ["O√≠do interno", "O√≠do medio", "O√≠do externo"], answer: 1, explanation: "Los huesecillos est√°n en el o√≠do medio y transmiten el sonido." },
      { question: "¬øQu√© conecta el o√≠do con el cerebro?", options: ["Nervio √≥ptico", "Nervio auditivo", "Nervio motor"], answer: 1, explanation: "El nervio auditivo lleva la informaci√≥n sonora al cerebro." }
    ]
  },

  tacto: {
    title: "‚úã El Tacto",
    content: "La piel contiene diferentes tipos de receptores:\n- Mecanorreceptores: detectan presi√≥n y vibraci√≥n.\n- Termorreceptores: detectan calor y fr√≠o.\n- Nociceptores: detectan el dolor.",
    questions: [
      { question: "¬øCu√°l es el √≥rgano principal del sentido del tacto?", options: ["La piel", "La lengua", "La nariz"], answer: 0, explanation: "La piel es el √≥rgano principal del sentido del tacto." },
      { question: "¬øQu√© tipo de receptores detectan la presi√≥n?", options: ["Quimiorreceptores", "Mecanorreceptores", "Termorreceptores"], answer: 1, explanation: "Los mecanorreceptores perciben la presi√≥n." },
      { question: "¬øQu√© receptores captan el dolor?", options: ["Nociceptores", "Conos", "Bastones"], answer: 0, explanation: "Los nociceptores detectan est√≠mulos dolorosos." },
      { question: "¬øQu√© detectan los termorreceptores?", options: ["Luz", "Temperatura", "Vibraci√≥n"], answer: 1, explanation: "Detectan los cambios de temperatura (fr√≠o y calor)." },
      { question: "¬øD√≥nde se encuentran los receptores del tacto?", options: ["En la retina", "En la piel", "En los m√∫sculos"], answer: 1, explanation: "Los receptores del tacto est√°n en la piel." }
    ]
  },

  olfato: {
    title: "üëÉ El Olfato",
    content: "El sentido del olfato se encuentra en la cavidad nasal.\nLos quimiorreceptores olfativos detectan sustancias qu√≠micas presentes en el aire y env√≠an se√±ales al cerebro a trav√©s del nervio olfativo.",
    questions: [
      { question: "¬øD√≥nde se localizan los quimiorreceptores del olfato?", options: ["En la lengua", "En la cavidad nasal", "En la piel"], answer: 1, explanation: "Los receptores del olfato est√°n en la cavidad nasal." },
      { question: "¬øQu√© tipo de receptores act√∫an en el olfato?", options: ["Mecanorreceptores", "Quimiorreceptores", "Fotorreceptores"], answer: 1, explanation: "El olfato utiliza quimiorreceptores para detectar olores." },
      { question: "¬øQu√© nervio lleva la informaci√≥n olfativa al cerebro?", options: ["Nervio √≥ptico", "Nervio olfativo", "Nervio auditivo"], answer: 1, explanation: "El nervio olfativo transmite los est√≠mulos del olfato." },
      { question: "¬øQu√© estimula los receptores olfativos?", options: ["Ondas sonoras", "Mol√©culas qu√≠micas en el aire", "Presi√≥n"], answer: 1, explanation: "Los olores son provocados por mol√©culas qu√≠micas vol√°tiles." },
      { question: "¬øQu√© ocurre si los receptores del olfato se da√±an?", options: ["Se pierde el sentido del gusto", "Se pierde la vista", "Se pierde el equilibrio"], answer: 0, explanation: "El olfato y el gusto est√°n muy relacionados." }
    ]
  },
 gusto: {
    title: "üëÖ El Gusto",
    content: "Sentido que permite percibir sabores.\n- Las papilas gustativas est√°n en la lengua.\n- Detectan sustancias disueltas en la saliva.\n- Tipos de sabores: dulce, salado, √°cido, amargo y umami.",
    questions: [
      { question: "¬øD√≥nde se encuentran las papilas gustativas?", options: ["En la lengua", "En el o√≠do", "En la nariz"], answer: 0, explanation: "Las papilas gustativas se localizan en la lengua." },
      { question: "¬øQu√© tipo de sustancia detectan las papilas gustativas?", options: ["S√≥lidas", "Gaseosas", "Disueltas"], answer: 2, explanation: "Deben estar disueltas en la saliva para ser detectadas." },
      { question: "¬øCu√°l de los siguientes no es un sabor primario?", options: ["Dulce", "Picante", "Amargo"], answer: 1, explanation: "El picante no es un sabor, es una sensaci√≥n de dolor." },
      { question: "¬øQu√© nervios llevan la informaci√≥n gustativa al cerebro?", options: ["Auditivo", "Gustativos", "Olfativos"], answer: 1, explanation: "Los nervios gustativos llevan la se√±al al cerebro." },
      { question: "¬øQu√© sabor detecta el umami?", options: ["Sabor a hierro", "Sabor √°cido", "Sabor a prote√≠nas o glutamato"], answer: 2, explanation: "El umami detecta prote√≠nas o glutamato, como en el queso o tomate." }
    ]
  },
  locomotor: {
    title: "ü¶¥ Aparato Locomotor",
    content: "Formado por:\n- Sistema √≥seo: huesos.\n- Sistema muscular: m√∫sculos.\nFunci√≥n: permite el movimiento y da soporte y protecci√≥n al cuerpo.",
    questions: [
      { question: "¬øQu√© estructuras forman el aparato locomotor?", options: ["Huesos y nervios", "Huesos y m√∫sculos", "M√∫sculos y piel"], answer: 1, explanation: "El aparato locomotor est√° compuesto por huesos y m√∫sculos." },
      { question: "¬øQu√© funci√≥n tiene el sistema √≥seo?", options: ["Controlar hormonas", "Proteger √≥rganos y dar soporte", "Transportar nutrientes"], answer: 1, explanation: "El esqueleto protege √≥rganos internos y da soporte al cuerpo." },
      { question: "¬øQu√© une el m√∫sculo al hueso?", options: ["Cart√≠lago", "Ligamento", "Tend√≥n"], answer: 2, explanation: "Los tendones unen m√∫sculo con hueso." },
      { question: "¬øQu√© tipo de tejido es el m√∫sculo esquel√©tico?", options: ["Epitelial", "Muscular voluntario", "Muscular involuntario"], answer: 1, explanation: "Es un tejido muscular voluntario controlado por el sistema nervioso." },
      { question: "¬øQu√© protege el cr√°neo?", options: ["Coraz√≥n", "Pulmones", "Cerebro"], answer: 2, explanation: "El cr√°neo protege el enc√©falo o cerebro." }
    ]
  },
  coordinacion: {
    title: "üß© Sistemas de Coordinaci√≥n",
    content: "El cuerpo humano coordina sus funciones mediante:\n- Sistema nervioso.\n- Sistema endocrino.\nAmbos trabajan juntos para responder a est√≠mulos internos y externos.",
    questions: [
      { question: "¬øCu√°les son los sistemas de coordinaci√≥n del cuerpo humano?", options: ["Respiratorio y circulatorio", "Nervioso y endocrino", "Digestivo y excretor"], answer: 1, explanation: "Nervioso y endocrino se encargan de coordinar funciones." },
      { question: "¬øQu√© sistema coordina las respuestas r√°pidas?", options: ["Endocrino", "Nervioso", "Excretor"], answer: 1, explanation: "El sistema nervioso act√∫a r√°pidamente ante est√≠mulos." },
      { question: "¬øQu√© sistema utiliza hormonas para coordinar funciones?", options: ["Nervioso", "Digestivo", "Endocrino"], answer: 2, explanation: "El sistema endocrino usa hormonas para regular procesos." },
      { question: "¬øQu√© parte del enc√©falo coordina movimientos?", options: ["Cerebelo", "Bulbo raqu√≠deo", "Hipot√°lamo"], answer: 0, explanation: "El cerebelo coordina movimientos voluntarios e involuntarios." },
      { question: "¬øQu√© √≥rgano act√∫a en ambos sistemas de coordinaci√≥n?", options: ["P√°ncreas", "Cerebro", "Hipot√°lamo"], answer: 2, explanation: "El hipot√°lamo conecta el sistema nervioso con el endocrino." }
    ]
  },
  endocrino: {
    title: "üí° Sistema Endocrino y Control Hormonal",
    content: "Formado por gl√°ndulas que secretan hormonas:\n- Hormonas: mensajeros qu√≠micos que regulan funciones.\n- Gl√°ndulas principales: hip√≥fisis, tiroides, p√°ncreas, suprarrenales, g√≥nadas.",
    questions: [
      { question: "¬øQu√© secretan las gl√°ndulas endocrinas?", options: ["Sangre", "Hormonas", "Vitaminas"], answer: 1, explanation: "Secretan hormonas directamente a la sangre." },
      { question: "¬øQu√© gl√°ndula regula otras gl√°ndulas?", options: ["Tiroides", "Hipot√°lamo", "Hip√≥fisis"], answer: 2, explanation: "La hip√≥fisis controla otras gl√°ndulas endocrinas." },
      { question: "¬øQu√© hormona produce el p√°ncreas?", options: ["Insulina", "Adrenalina", "Melatonina"], answer: 0, explanation: "La insulina regula los niveles de glucosa en sangre." },
      { question: "¬øQu√© gl√°ndulas producen hormonas sexuales?", options: ["Tiroides", "G√≥nadas", "Suprarrenales"], answer: 1, explanation: "Las g√≥nadas (ovarios y test√≠culos) producen hormonas sexuales." },
      { question: "¬øQu√© gl√°ndula produce adrenalina?", options: ["Tiroides", "Suprarrenales", "P√°ncreas"], answer: 1, explanation: "Las gl√°ndulas suprarrenales liberan adrenalina en situaciones de estr√©s." }
    ]
  },
  drogas: {
    title: "üö´ Drogas y Salud",
    content: "Las drogas son sustancias que alteran el funcionamiento del sistema nervioso.\nPueden ser legales o ilegales.\n- Afectan la coordinaci√≥n, percepci√≥n, emociones.\n- Pueden causar dependencia f√≠sica y psicol√≥gica.",
    questions: [
      { question: "¬øQu√© sistema afecta principalmente una droga?", options: ["Digestivo", "Nervioso", "Endocrino"], answer: 1, explanation: "Las drogas alteran el funcionamiento del sistema nervioso." },
      { question: "¬øQu√© tipo de dependencia pueden causar las drogas?", options: ["Psicol√≥gica y f√≠sica", "Visual y auditiva", "Solo f√≠sica"], answer: 0, explanation: "Pueden causar dependencia tanto f√≠sica como psicol√≥gica." },
      { question: "¬øQu√© tipo de droga es el alcohol?", options: ["Estimulante", "Depresora", "Alucin√≥gena"], answer: 1, explanation: "El alcohol es una droga depresora del sistema nervioso." },
      { question: "¬øCu√°l es una consecuencia del consumo de drogas?", options: ["Mejora la memoria", "Aumenta la concentraci√≥n", "Deterioro de la salud"], answer: 2, explanation: "El consumo de drogas perjudica la salud general." },
      { question: "¬øCu√°l es un ejemplo de droga legal?", options: ["Marihuana", "Hero√≠na", "Tabaco"], answer: 2, explanation: "El tabaco es legal pero perjudicial para la salud." }
    ]
  },
  sistema_nervioso: {
    title: "üß† Sistema Nervioso",
    content: "Formado por:\n- Sistema nervioso central (cerebro y m√©dula espinal).\n- Sistema nervioso perif√©rico (nervios).\nFunciones:\n- Recibir est√≠mulos.\n- Interpretar informaci√≥n.\n- Generar respuestas.",
    questions: [
      { question: "¬øQu√© √≥rganos forman el sistema nervioso central?", options: ["Cerebro y m√©dula espinal", "Cerebro y coraz√≥n", "M√©dula √≥sea y pulmones"], answer: 0, explanation: "El sistema nervioso central est√° compuesto por el cerebro y la m√©dula espinal." },
      { question: "¬øQu√© funci√≥n cumple el sistema nervioso?", options: ["Respirar", "Reproducirse", "Coordinar respuestas del cuerpo"], answer: 2, explanation: "Coordina todas las funciones del cuerpo humano." },
      { question: "¬øQu√© parte del sistema nervioso interpreta la informaci√≥n?", options: ["La piel", "El cerebro", "Los m√∫sculos"], answer: 1, explanation: "El cerebro analiza e interpreta la informaci√≥n que recibe." },
      { question: "¬øQu√© transporta el sistema nervioso perif√©rico?", options: ["Hormonas", "Impulsos nerviosos", "Ox√≠geno"], answer: 1, explanation: "El sistema nervioso perif√©rico transporta informaci√≥n al y desde el sistema central." },
      { question: "¬øQu√© unidad b√°sica forma el sistema nervioso?", options: ["Neuronas", "Gl√≥bulos", "M√∫sculos"], answer: 0, explanation: "Las neuronas son las c√©lulas principales del sistema nervioso." }
    ]
  }
};


let chapterKeys = Object.keys(contenido);
let currentChapter = 0, currentQuestion = 0, score = 0;

function init() {
  renderChapters();
  document.querySelector('.back-btn').onclick = () => {
    document.querySelector('.celebration').classList.add('hidden');
    document.querySelector('.chapters-container').classList.remove('hidden');
  };
}

function renderChapters() {
  const container = document.querySelector('.chapters-container');
  container.innerHTML = '';

  chapterKeys.forEach((key, index) => {
    let chapter = contenido[key];
    let card = document.createElement('div');
    card.className = 'chapter-card';
    card.innerHTML = `<h3>${chapter.title}</h3><p>${chapter.content.replace(/\n/g, '<br>')}</p>`;
    card.onclick = () => startChapter(index);
    container.append(card);
  });
}

function startChapter(index) {
  currentChapter = index;
  currentQuestion = 0;
  document.querySelector('.chapters-container').classList.add('hidden');
  document.querySelector('.question-container').classList.remove('hidden');
  showQuestion();
}

function showQuestion() {
  let chapter = contenido[chapterKeys[currentChapter]];
  let q = chapter.questions[currentQuestion];

  document.querySelector('.chapter-title').innerText = chapter.title;
  document.querySelector('.question-body').innerHTML = `
    <h3>${q.question}</h3>
    ${q.options.map((op, idx) => `<div class='option' onclick='checkAnswer(${idx})'>${op}</div>`).join('')}`;
  document.querySelector('.explanation').classList.add('hidden');
  document.querySelector('.next-btn').classList.add('hidden');
}

function checkAnswer(selected) {
  let q = contenido[chapterKeys[currentChapter]].questions[currentQuestion];
  let correct = selected === q.answer;

  document.querySelectorAll('.option').forEach((el, idx) => {
    el.classList.add('disabled');
    if (idx === q.answer) el.classList.add('correct');
    else if (idx === selected) el.classList.add('wrong');
  });

  document.querySelector('.explanation').innerHTML = `${correct ? 'üéâ Correcto!' : '‚ùå Incorrecto!'} ${q.explanation}`;
  document.querySelector('.explanation').classList.remove('hidden');
  document.querySelector('.next-btn').classList.remove('hidden');

  if (correct) score += 100;
  document.querySelector('.score span').innerText = score;
}

document.querySelector('.next-btn').onclick = () => {
  if (++currentQuestion < contenido[chapterKeys[currentChapter]].questions.length)
    showQuestion();
  else finishChapter();
};

function finishChapter() {
  document.querySelector('.celebration').classList.remove('hidden');
  document.querySelector('.question-container').classList.add('hidden');
  updateProgress();
}

function updateProgress() {
  let prog = ((currentChapter + 1) / chapterKeys.length) * 100;
  document.querySelector('.progress').style.width = prog + '%';
}

init();